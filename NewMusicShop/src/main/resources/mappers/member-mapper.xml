<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "httpS://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="memberMapper">

    <resultMap type="com.kh.musicshop.member.model.vo.Member" id="memberResultMap">
        <id property="userId" column="USER_ID" />
        <result property="userPwd" column="USER_PWD" />
        <result property="userName" column="USER_NAME" />
        <result property="enrollDate" column="ENROLL_DATE" />
        <result property="modifyDate" column="MODIFY_DATE" />
        <result property="status" column="STATUS" />
    </resultMap>

    <select id="loginMember" parameterType="com.kh.musicshop.member.model.vo.Member" resultMap="memberResultMap">
        SELECT USER_ID, USER_PWD, USER_NAME, EMAIL, GENDER, AGE, PHONE, ADDRESS, ENROLL_DATE, MODIFY_DATE, STATUS
        FROM MEMBER
        WHERE USER_ID = #{userId}
        AND STATUS = 'Y'
    </select>

    <insert id="insertMember" parameterType="com.kh.musicshop.member.model.vo.Member">
        INSERT INTO MEMBER (USER_ID, USER_PWD, USER_NAME, EMAIL, GENDER, AGE, PHONE, ADDRESS)
        VALUES (#{userId}, #{userPwd}, #{userName}, #{email}, #{gender}, #{age}, #{phone}, #{address})
    </insert>

    <update id="updateMember" parameterType="com.kh.musicshop.member.model.vo.Member">
        UPDATE MEMBER
        SET USER_NAME = #{userName},
            EMAIL = #{email},
            AGE = #{age},
            PHONE = #{phone},
            ADDRESS = #{address},
            GENDER = #{gender},
            MODIFY_DATE = SYSDATE
        WHERE USER_ID = #{userId}
        AND STATUS = 'Y'
    </update>

    <update id="deleteMember" parameterType="com.kh.musicshop.member.model.vo.Member">
        UPDATE MEMBER
        SET STATUS = 'N'
        WHERE USER_ID = #{userId}
    </update>

    <select id="idCheck" resultType="int">
        SELECT COUNT(*)
        FROM MEMBER
        WHERE USER_ID = #{userId}
    </select>

</mapper>