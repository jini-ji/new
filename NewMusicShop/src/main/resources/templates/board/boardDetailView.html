<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ğŸ§ ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <style>
        body {
            background: #1e1e1e;
            color: white;
            font-family: 'Segoe UI', sans-serif;
        }
        .content {
            width: 70%;
            margin: 100px auto;
            background-color: #2a2a2a;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .table th {
            background-color: transparent;
            color: #ffca28;
            font-weight: bold;
        }
        .btn {
            border-radius: 30px;
            font-weight: bold;
        }
        .btn-warning {
            background-color: #ffca28;
            color: black;
            border: none;
        }
        .btn-warning:hover {
            background-color: #ffc107;
        }
        .btn-danger {
            background-color: #d32f2f;
            border: none;
        }
        .btn-secondary {
            border-radius: 30px;
        }
        .post-image {
            display: block;
            max-width: 100%;
            max-height: 400px;
            margin-top: 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>

<!-- ê³µí†µ í—¤ë” -->
<div th:replace="fragments/header :: header"></div>

<div class="content">
    <h2 class="text-center mb-5">ğŸ§ ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°</h2>

    <table class="table table-borderless text-white">
        <tr>
            <th>ì œëª©</th>
            <td colspan="3" th:text="${b.boardTitle}">ì œëª©</td>
        </tr>
        <tr>
            <th>ì‘ì„±ì</th>
            <td th:text="${b.boardWriter}">ì‘ì„±ì</td>
            <th>ì‘ì„±ì¼</th>
            <td th:text="${b.createDate}">ì‘ì„±ì¼</td>
        </tr>
        <tr>
            <th>ì²¨ë¶€íŒŒì¼</th>
            <td colspan="3">
                <div th:if="${#strings.isEmpty(b.originName)}">ì²¨ë¶€íŒŒì¼ ì—†ìŒ</div>
                <div th:if="${!#strings.isEmpty(b.originName)}">
                    <a th:href="${b.changeName}" 
                       th:download="${b.originName}" 
                       style="color: #ffc107;" 
                       th:text="${b.originName}">íŒŒì¼ëª…</a>
                </div>
            </td>
        </tr>
        <tr>
            <th>ë‚´ìš©</th>
            <td colspan="3">
                <p style="white-space: pre-line;" th:text="${b.boardContent}">ë‚´ìš©</p>

                <!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° -->
                <div th:if="${!#strings.isEmpty(b.originName)}">
                    <img th:if="${isImage}" 
                         th:src="@{${b.changeName}}" 
                         class="post-image" alt="ì²¨ë¶€ ì´ë¯¸ì§€"/>
                </div>
            </td>
        </tr>
    </table>

    <!-- ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ (ì‘ì„±ìë§Œ ë³´ì´ë„ë¡) -->
    <div class="text-center mt-4" th:if="${loginUser != null and b.boardWriter == loginUser.userId}">
        <a th:href="@{/update.bo(bno=${b.boardNo})}" class="btn btn-warning">ìˆ˜ì •í•˜ê¸°</a>

        <!-- ì‚­ì œ form -->
        <form th:action="@{/delete.bo}" method="post" style="display:inline;">
            <input type="hidden" name="bno" th:value="${b.boardNo}" />
            <input type="hidden" name="filePath" th:value="${b.changeName}" />
            <button type="submit" class="btn btn-danger"
                    onclick="return confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">ì‚­ì œí•˜ê¸°</button>
        </form>
    </div>

    <div class="text-center mt-3">
        <a th:href="@{/list.bo}" class="btn btn-secondary">ëª©ë¡ìœ¼ë¡œ</a>
    </div>
</div>

<!-- ê³µí†µ í‘¸í„° -->
<div th:replace="fragments/footer :: footer"></div>

</body>
</html>